import{j as e,r as c,C as m,L as j,O as g,a as h,u as f,c as b,b as N,R as w}from"./index--CTbHk6f.js";function v({title:s,subTitle:l}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-row",children:e.jsxs("div",{className:"grow",children:[e.jsx("h1",{className:"text-5xl pb-5",children:s}),e.jsx("h2",{className:"text-base md:text-3xl pb-3",children:l})]})})})}function S({url:s,sizeClass:l}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"avatar mb-5 w-full place-content-center",children:e.jsx("div",{className:`${l} rounded shadow-lg `,children:e.jsx("img",{src:s})})})})}function y({title:s,nameValList:l}){const t=l.map(o=>e.jsxs("li",{className:"mb-1",children:[e.jsx("a",{href:`${o.url}`,className:"link link-accent",target:"_blank",children:o.name})," - ",o.desc]}));return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"shadow-lg bg-teal-100 text-left	p-3 mb-5",children:[e.jsx("p",{className:"text-center mb-2",children:s}),e.jsx("ul",{children:t})]})})}function k({title:s,text:l}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"shadow-lg bg-teal-100 text-left	p-3 mb-5",children:[e.jsx("p",{className:"text-center mb-2",children:s}),e.jsx("p",{className:"whitespace-pre-wrap",children:l})]})})}function T(){const[s,l]=c.useState("");return c.useEffect(()=>{fetch("/components").then(t=>t.json()).then(t=>{if(t.result=="success"){const i=t.components.map(r=>{switch(r.type){case m.VIEW_COMPONENT_TYPE_PROFILE_PIC:{const n=JSON.parse(r.json);return e.jsx(S,{url:n.url,sizeClass:`pp-w-${n.size}`})}case m.VIEW_COMPONENT_TYPE_LINK_LIST:{const n=JSON.parse(r.json);return e.jsx(y,{title:n.title,nameValList:n.items})}case m.VIEW_COMPONENT_TYPE_TEXT_BOX:{const n=JSON.parse(r.json);return e.jsx(k,{title:n.title,text:n.text})}default:{console.log("View Component Type not supported: "+r.type);break}}});l(i)}else alert(JSON.stringify(t.messages))}).catch(t=>{console.log(t.message),alert("Failed to load componetns.")})},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"py-4",children:s}),e.jsx("div",{className:"py-4 text-center text-slate-400",children:e.jsx("a",{href:"/m/",children:e.jsx("button",{className:"btn btn-ghost btn-sm m-2",children:"Manage"})})})]})}function E(){const[s,l]=c.useState(""),[t,o]=c.useState(""),[i,r]=c.useState(!1),[n,d]=c.useState(!1),[u,x]=c.useState("");c.useEffect(()=>{fetch("/basic-info").then(a=>a.json()).then(a=>{a.result=="success"?(l(a.title),document.title=a.title,o(a.subTitle),r(!0),x(a.iconUrl),a.faviconUrl!=""&&P(a.faviconUrl)):alert(JSON.stringify(a.messages)),console.log(a)}).catch(a=>{console.log(a.message),alert("Failed to load articles.")})},[]);const p=a=>{a.preventDefault(),d(!n)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container mx-auto font-mono",children:[e.jsx(j,{loaded:i}),e.jsxs("div",{className:i?"visible":"invisible",children:[e.jsxs("div",{className:"columns-1 text-left",children:[e.jsx(v,{title:s,subTitle:t}),e.jsxs("div",{className:"flex md:hidden",children:[e.jsx(D,{iconUrl:u}),e.jsx("a",{className:"link link-accent mt-2",onClick:p,children:n?"Back to Posts":"Show About Me"})]})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("div",{className:n?" hidden ":" col-span-4 md:col-span-3",children:e.jsx(g,{})}),e.jsx("div",{className:n?" col-span-4 ":" hidden   md:col-span-1 md:block md:pl-4",children:e.jsx(T,{})})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-slate-400 text-center",children:["Powered by ",e.jsx("a",{className:"link",target:"_blank",href:"https://github.com/marusasa/serverless-blog",children:"Serverless Blog Project"})]})})]})]})})}function D({iconUrl:s}){return s!=""?e.jsx("img",{src:s,className:"w-10 rounded-full mr-4 shadow-lg"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-10 mr-4 shadow-lg rounded-full",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})})}function P(s){const l=document.createElement("link");l.rel="shortcut icon",l.type="image/png",l.href=s,document.head.appendChild(l)}function C({article:s}){const l=s.publishedAt.substring(0,10),o=new Date(s.publishedAt).toLocaleDateString(),i=M(s.title)+"_"+s.articleId,r=c.useRef(null),n=d=>{d.preventDefault(),r.current.showModal()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card bg-white w-full mb-8 text-left shadow-lg border-solid border border-slate-200 p-4 md:p-8",children:e.jsx("div",{className:"card-body p-0",children:e.jsxs("article",{children:[e.jsx("h2",{className:"card-title",children:s.title}),e.jsx("p",{className:"font-thin italic",children:e.jsx("time",{dateTime:l,children:o})}),e.jsx("p",{className:"whitespace-pre-wrap line-clamp-4 mb-3",children:s.body}),e.jsxs("p",{children:[e.jsx(h,{to:"/post/"+i,className:"link link-accent mr-5",children:"Read More..."}),e.jsx("a",{className:s.summary==""||s.summary==null?"invisible":"visible link link-accent",onClick:n,children:"Show AI Summary"})]})]})})}),e.jsx("dialog",{id:"my_modal_1",className:"modal",ref:r,children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"AI Summary:"}),e.jsx("p",{className:"py-4",children:s.summary}),e.jsx("div",{className:"modal-action",children:e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn",children:"OK"})})})]})})]})}function M(s){s=s.replaceAll(" ","-");const l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-",t=new RegExp(`[^${l}]`,"g");return s.replace(t,"")}function I(){const[s,l]=c.useState([]);return c.useEffect(()=>{fetch("/articles").then(t=>t.json()).then(t=>{t.result=="success"?l(t.articles):alert(JSON.stringify(t.messages)),console.log(t)}).catch(t=>{console.log(t.message),alert("Failed to load articles.")})},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"py-4",children:s.map(t=>e.jsx(C,{article:t},t.articleId))})})}function A(){const s=f(),[l,t]=c.useState({}),[o,i]=c.useState(""),[r,n]=c.useState("");return c.useEffect(()=>{try{if(s.result=="success"){t(s.article),i(s.article.publishedAt.substring(0,10));const d=new Date(s.article.publishedAt);n(d.toLocaleDateString())}else alert("Post not loaded.")}catch(d){console.log(d),alert("Error loading data.")}}),e.jsx(e.Fragment,{children:e.jsx("div",{className:"py-4",children:e.jsx("div",{className:"card bg-white w-full mb-8 text-left shadow-lg border-solid border border-slate-200 p-4 md:p-8",children:e.jsx("div",{className:"card-body p-0",children:e.jsxs("article",{children:[e.jsx("p",{children:e.jsx(h,{to:"/",className:"link link-accent",children:"Blog Top"})}),e.jsx("h2",{className:"card-title",children:l.title}),e.jsx("p",{className:"font-thin italic",children:e.jsx("time",{dateTime:o,children:r})}),e.jsx("p",{className:"whitespace-pre-wrap",children:l.body})]})})})})})}async function L({params:s}){const l=s.postId;return fetch("/articles/"+l)}const O=b([{path:"/",element:e.jsx(E,{}),children:[{index:!0,element:e.jsx(I,{})},{path:"post/:postId",element:e.jsx(A,{}),loader:L}]}]);N(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(w,{router:O})}));
