import{j as e,r as t,d as P,e as U,L,C as w,O as A,a as J,b as M,B as R,f as V,g as v}from"./index--CTbHk6f.js";function E({text:a}){return e.jsx("h2",{className:"text-2xl mb-4",children:a})}function O({text:a,inProcess:d}){return e.jsxs("button",{className:(d?"btn-disabled":"")+" btn btn-primary mr-3 btn-sm",type:"submit",children:[e.jsx("span",{className:(d?"":"hidden ")+" loading loading-spinner"}),a]})}function W(){const[a,d]=t.useState(""),[c,i]=t.useState(""),[p,x]=t.useState("draft"),[m,g]=t.useState(!1),j=P(),f=async(h,o,u)=>{await fetch("/mng/articles",{method:"POST",body:JSON.stringify({title:h,body:o,status:u}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(b=>b.json()).then(b=>{b.result=="success"?(alert("Data saved."),j("/m/posts")):alert(JSON.stringify(b.messages))}).catch(b=>{console.log(b.message)}).finally(()=>{g(!1)})},r=h=>{h.preventDefault(),g(!0),f(a,c,p)};return e.jsxs(e.Fragment,{children:[e.jsx(E,{text:"New Post"}),e.jsxs("form",{onSubmit:r,children:[e.jsx("div",{className:"flex",children:e.jsx(O,{text:"Save",inProcess:m})}),e.jsxs("label",{className:"form-control mb-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Title:"})}),e.jsx("input",{type:"text",className:"input input-bordered w-full max-w-5xl",value:a,onChange:h=>d(h.target.value)})]}),e.jsx("div",{className:"form-control ",children:e.jsxs("label",{className:"label cursor-pointer w-28",children:[e.jsx("span",{className:"label-text",children:"Draft"}),e.jsx("input",{type:"radio",name:"status",value:"draft",className:"radio radio-primary",checked:p==="draft",onChange:h=>x(h.target.value)})]})}),e.jsx("div",{className:"form-control mb-4",children:e.jsxs("label",{className:"label cursor-pointer w-28",children:[e.jsx("span",{className:"label-text",children:"Publish"}),e.jsx("input",{type:"radio",name:"status",value:"publish",className:"radio radio-primary",checked:p==="publish",onChange:h=>x(h.target.value)})]})}),e.jsxs("label",{className:"form-control mb-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Body:"})}),e.jsx("textarea",{className:"textarea textarea-bordered w-full max-w-5xl ",value:c,onChange:h=>i(h.target.value),rows:20})]})]})]})}function Y(){const a=P(),{state:d}=U(),{articleId:c}=d,[i,p]=t.useState(""),[x,m]=t.useState(""),[g,j]=t.useState("draft"),[f,r]=t.useState(""),[h,o]=t.useState(!1),[u,b]=t.useState(!1),[C,l]=t.useState(!1);t.useEffect(()=>{fetch("/mng/articles/"+c).then(s=>s.json()).then(s=>{s.result=="success"?(p(s.article.title),m(s.article.body),j(s.article.status),r(s.article.summary),o(!0)):alert(JSON.stringify(s.messages))}).catch(s=>{console.log(s.message),alert("Failed to load article.")})},[]);const I=async(s,D,B)=>{await fetch("/mng/articles/",{method:"PATCH",body:JSON.stringify({title:s,body:D,status:B,articleId:c,summary:f}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(T=>T.json()).then(T=>{T.result=="success"?(alert("Data saved."),l(!1)):alert(JSON.stringify(T.messages))}).catch(T=>{alert("Failed to save article."),console.log(T.message)}).finally(()=>{b(!1)})},N=async()=>{await fetch("/mng/articles/"+c,{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"}}).then(s=>s.json()).then(s=>{s.result=="success"?a("/m/posts"):alert(JSON.stringify(s.messages))}).catch(s=>{alert("Failed to delete data."),console.log(s.message)}).finally(()=>{b(!1)})},_=async()=>{await fetch("/mng/articles/"+c+"/ai-summary",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8"}}).then(s=>s.json()).then(s=>{s.result=="success"?(r(s.summary),l(!0),alert("AI Summary generated (Not saved yet). Summary: "+s.summary)):alert(JSON.stringify(s.messages))}).catch(s=>{alert("Error."),console.log(s.message)}).finally(()=>{})},n=s=>{s.preventDefault(),b(!0),I(i,x,g)},F=s=>{s.preventDefault();let D=!1;C?D=confirm("There are unsaved changes. Disregard and go back?"):D=!0,D&&a("/m/posts")},k=s=>{s.preventDefault(),confirm("Delete record?")&&N()},y=s=>{s.preventDefault(),C?alert("There are unsaved changes. Data must be saved first."):_()},S=s=>{s.preventDefault(),alert("AI Summary: "+f)};return e.jsxs(e.Fragment,{children:[e.jsx(E,{text:"Edit Post"}),e.jsx(L,{loaded:h}),e.jsx("div",{className:h?"visible":"invisible",children:e.jsxs("form",{onSubmit:n,children:[e.jsxs("div",{className:"flex",children:[e.jsx(O,{text:"Save",inProcess:u}),e.jsx("button",{className:"btn btn-sm btn-accent mr-3",onClick:k,children:"Delete"}),e.jsx("button",{className:"btn btn-sm mr-3",onClick:F,children:"Back"}),e.jsx("button",{className:"btn btn-sm btn-outline btn-secondary mr-3",onClick:y,children:"Generate AI Summary"}),e.jsx("button",{className:"btn btn-sm btn-outline btn-secondary mr-3",onClick:S,children:"View AI Summary"})]}),e.jsxs("label",{className:"form-control mb-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Title:"})}),e.jsx("input",{type:"text",className:"input input-bordered w-full max-w-5xl",value:i,onChange:s=>{p(s.target.value),l(!0)}})]}),e.jsx("div",{className:"form-control ",children:e.jsxs("label",{className:"label cursor-pointer w-28",children:[e.jsx("span",{className:"label-text",children:"Draft"}),e.jsx("input",{type:"radio",name:"status",value:"draft",className:"radio radio-primary",checked:g==="draft",onChange:s=>{j(s.target.value),l(!0)}})]})}),e.jsx("div",{className:"form-control mb-4",children:e.jsxs("label",{className:"label cursor-pointer w-28",children:[e.jsx("span",{className:"label-text",children:"Publish"}),e.jsx("input",{type:"radio",name:"status",value:"publish",className:"radio radio-primary",checked:g==="publish",onChange:s=>{j(s.target.value),l(!0)}})]})}),e.jsxs("label",{className:"form-control mb-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Article:"})}),e.jsx("textarea",{className:"textarea textarea-bordered w-full max-w-5xl",value:x,onChange:s=>{m(s.target.value),l(!0)},rows:20})]})]})})]})}function X({article:a}){const d=P(),c=i=>{i.preventDefault(),d("/m/posts/edit",{state:{articleId:a.articleId}})};return e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("th",{children:a.title}),e.jsx("td",{children:a.status}),e.jsx("td",{children:a.createdAt}),e.jsx("td",{children:a.publishedAt}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-outline btn-primary",onClick:c,children:"Edit"})})]})})}function G(){const[a,d]=t.useState([]),[c,i]=t.useState(!1),[p,x]=t.useState(!1),[m,g]=t.useState(!1);t.useEffect(()=>{i(!1),fetch("/mng/articles").then(r=>r.json()).then(r=>{r.result=="success"?(i(!0),d(r.articles)):alert(JSON.stringify(r.messages)),console.log(r)}).catch(r=>{console.log(r.message),alert("Failed to load articles.")})},[m]);const j=async(r,h,o)=>{await fetch("/mng/articles",{method:"POST",body:JSON.stringify({title:r,body:h,status:o}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(u=>u.json()).then(u=>{u.result=="success"?g(!m):alert(JSON.stringify(u.messages))}).catch(u=>{console.log(u.message)}).finally(()=>{x(!1)})},f=r=>{r.preventDefault(),x(!0),j("New Post","",w.POST_STATUS_DRAFT)};return e.jsxs(e.Fragment,{children:[e.jsx(E,{text:"Posts"}),e.jsx("div",{className:"flex",children:e.jsx("form",{onSubmit:f,children:e.jsx(O,{text:"New",inProcess:p})})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx(L,{loaded:c}),e.jsxs("table",{className:"table "+(c?"visible":"invisible"),children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created At"}),e.jsx("th",{children:"Published At"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:a.map(r=>e.jsx(X,{article:r},r.articleId))})]})]})]})}function H(){const[a,d]=t.useState(""),[c,i]=t.useState(""),[p,x]=t.useState(""),[m,g]=t.useState(""),[j,f]=t.useState(""),[r,h]=t.useState(!1),[o,u]=t.useState(!1);t.useEffect(()=>{fetch("/mng/setting").then(l=>l.json()).then(l=>{l.result=="success"?(d(l.setting.blogTitle),i(l.setting.blogSubTitle),f(l.setting.settingId),x(l.setting.iconUrl),g(l.setting.faviconUrl),h(!0)):alert(JSON.stringify(l.messages))}).catch(l=>{console.log(l.message),alert("Failed to load setting.")})},[]);const b=async(l,I)=>{await fetch("/mng/setting",{method:"PATCH",body:JSON.stringify({blogTitle:l,blogSubTitle:I,iconUrl:p,faviconUrl:m,settingId:j}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(N=>N.json()).then(N=>{N.result=="success"?alert("Data saved."):alert(JSON.stringify(N.messages))}).catch(N=>{alert("Failed to save setting."),console.log(N.message)}).finally(()=>{u(!1)})},C=l=>{l.preventDefault(),u(!0),b(a,c)};return e.jsxs(e.Fragment,{children:[e.jsx(E,{text:"Edit Setting"}),e.jsx(L,{loaded:r}),e.jsx("div",{className:r?"visible":"invisible",children:e.jsxs("form",{onSubmit:C,children:[e.jsx("div",{className:"flex",children:e.jsx(O,{text:"Save",inProcess:o})}),e.jsxs("label",{className:"form-control mb-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Blog Title:"})}),e.jsx("input",{type:"text",className:"input input-bordered w-full max-w-5xl",value:a,onChange:l=>d(l.target.value)})]}),e.jsxs("label",{className:"form-control mb-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Blog Sub-Title:"})}),e.jsx("input",{type:"text",className:"input input-bordered w-full max-w-5xl",value:c,onChange:l=>i(l.target.value)})]}),e.jsxs("label",{className:"form-control mb-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Icon URL:"})}),e.jsx("input",{type:"text",className:"input input-bordered w-full max-w-5xl",value:p,onChange:l=>x(l.target.value)})]}),e.jsxs("label",{className:"form-control mb-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Favicon URL:"})}),e.jsx("input",{type:"text",className:"input input-bordered w-full max-w-5xl",value:m,onChange:l=>g(l.target.value)})]})]})})]})}function K({component:a}){const d=P(),c=x=>{x.preventDefault(),d("/m/components/edit",{state:{pageComponentId:a.pageComponentId}})},i=JSON.parse(a.json);let p="";return i.title&&(p=i.title),e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("th",{children:a.type}),e.jsx("td",{children:p}),e.jsx("td",{children:a.order}),e.jsx("td",{children:a.enabled?"Enabled":"Disabled"}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-outline btn-primary",onClick:c,children:"Edit"})})]})})}function $(){const[a,d]=t.useState([]),[c,i]=t.useState(!1),[p,x]=t.useState(!1),[m,g]=t.useState(w.VIEW_COMPONENT_TYPE_PROFILE_PIC),[j,f]=t.useState(!1),r=t.useRef(null);t.useEffect(()=>{i(!1),fetch("/mng/components").then(o=>o.json()).then(o=>{o.result=="success"?(i(!0),d(o.components)):alert(JSON.stringify(o.messages))}).catch(o=>{console.log(o.message),alert("Failed to load data.")})},[j]);const h=o=>{o.preventDefault(),x(!0),fetch("/mng/components",{method:"POST",body:JSON.stringify({type:m}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(u=>u.json()).then(u=>{u.result=="success"?f(!j):alert(JSON.stringify(u.messages))}).catch(u=>{alert("Failed to save data."),console.log(u.message)}).finally(()=>{x(!1),r.current.close()})};return e.jsxs(e.Fragment,{children:[e.jsx(E,{text:"Page Components"}),e.jsx("div",{className:"flex",children:e.jsx("button",{className:"btn btn-primary mr-3 btn-sm",onClick:()=>r.current.showModal(),children:"New"})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx(L,{loaded:c}),e.jsxs("table",{className:"table "+(c?"visible":"invisible"),children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Order"}),e.jsx("th",{children:"Enabled"})]})}),e.jsx("tbody",{children:a.map(o=>e.jsx(K,{component:o},o.pageComponentId))})]})]}),e.jsx("dialog",{id:"ask_type",className:"modal",ref:r,children:e.jsxs("div",{className:"modal-box",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),e.jsx("h3",{className:"font-bold text-lg mb-6",children:"Select Page Component Type"}),e.jsx("div",{className:"mb-6",children:e.jsxs("select",{className:"select select-bordered w-full max-w-xs",onChange:o=>g(o.target.value),children:[e.jsx("option",{value:w.VIEW_COMPONENT_TYPE_PROFILE_PIC,children:"Profile Picture"}),e.jsx("option",{value:w.VIEW_COMPONENT_TYPE_LINK_LIST,children:"Link List"}),e.jsx("option",{value:w.VIEW_COMPONENT_TYPE_TEXT_BOX,children:"Text Box"})]})}),e.jsx("div",{className:"",children:e.jsx("form",{onSubmit:h,children:e.jsx(O,{text:"Create",inProcess:p})})})]})})]})}function q(){const a=P(),{state:d}=U(),{pageComponentId:c}=d,[i,p]=t.useState(""),[x,m]=t.useState(""),[g,j]=t.useState(0),[f,r]=t.useState(!1),[h,o]=t.useState(!1),[u,b]=t.useState(!1);t.useEffect(()=>{fetch("/mng/components/"+c).then(n=>n.json()).then(n=>{if(n.result=="success"){p(n.component.type);const F=JSON.parse(n.component.json);m(JSON.stringify(F,null,4)),j(n.component.order),r(n.component.enabled),o(!0)}else alert(JSON.stringify(n.messages))}).catch(n=>{console.log(n.message),alert("Failed to load data.")})},[]);const C=async(n,F,k)=>{try{let y="";switch(i){case w.VIEW_COMPONENT_TYPE_PROFILE_PIC:{y="profile-pic";break}case w.VIEW_COMPONENT_TYPE_LINK_LIST:{y="link-list";break}case w.VIEW_COMPONENT_TYPE_TEXT_BOX:{y="text-box";break}default:throw"Unknown component type exception. Data not saved."}await fetch("/mng/components/"+c+"/"+y,{method:"PATCH",body:JSON.stringify({data:JSON.parse(n),order:F,enabled:k}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(S=>S.json()).then(S=>{S.result=="success"?(alert("Data saved."),a("/m/components")):alert(JSON.stringify(S.messages))}).catch(S=>{alert("Failed to save data."),console.log(S.message)}).finally(()=>{b(!1)})}catch(y){alert(y)}},l=async()=>{await fetch("/mng/components/"+c,{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"}}).then(n=>n.json()).then(n=>{n.result=="success"?a("/m/components"):alert(JSON.stringify(n.messages))}).catch(n=>{alert("Failed to delete data."),console.log(n.message)}).finally(()=>{b(!1)})},I=n=>{n.preventDefault(),b(!0),C(x,g,f)},N=()=>{a("/m/components")},_=n=>{n.preventDefault(),confirm("Delete record?")&&l()};return e.jsxs(e.Fragment,{children:[e.jsx(E,{text:"Edit Component"}),e.jsx(L,{loaded:h}),e.jsx("div",{className:h?"visible":"invisible",children:e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"flex",children:[e.jsx(O,{text:"Save",inProcess:u}),e.jsx("button",{className:"btn btn-sm btn-accent mr-3",onClick:_,children:"Delete"}),e.jsx("button",{className:"btn btn-sm",onClick:N,children:"Cancel"})]}),e.jsxs("label",{className:"form-control mb-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Order:"})}),e.jsx("input",{type:"number",className:"input input-bordered w-full max-w-5xl",value:g,onChange:n=>j(Number(n.target.value))})]}),e.jsxs("label",{className:"form-control mb-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Status:"})}),e.jsxs("select",{className:"select select-bordered w-full max-w-xs",value:f===!0?"true":"false",onChange:n=>r(n.target.value==="true"),children:[e.jsx("option",{selected:!0,value:"true",children:"Enable"}),e.jsx("option",{value:"false",children:"Disable"})]})]}),e.jsxs("label",{className:"form-control mb-4",children:[e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text",children:"Data:"})}),e.jsx("textarea",{className:"textarea textarea-bordered w-full max-w-5xl",value:x,onChange:n=>m(n.target.value),rows:20})]})]})})]})}function z({userName:a}){return e.jsxs(e.Fragment,{children:["Login: ",a]})}function Q(){const a=P(),[d,c]=t.useState("");return t.useEffect(()=>{fetch("/mng/check-login",{method:"POST"}).then(i=>i.json()).then(i=>{i.result=="success"?c(i.userName):a("/login/login")}).catch(i=>{console.log(i.message),alert("Failed to Check Login.")})},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"flex p-4",children:[e.jsx("div",{className:"grow",children:e.jsx("h1",{className:"text-5xl",children:"Manage"})}),e.jsx("div",{children:e.jsx(z,{userName:d})})]}),e.jsx("div",{children:e.jsxs("div",{className:"drawer lg:drawer-open",children:[e.jsx("input",{id:"my-drawer-2",type:"checkbox",className:"drawer-toggle"}),e.jsxs("div",{className:"drawer-content flex flex-col ",children:[e.jsx("label",{htmlFor:"my-drawer-2",className:"btn btn-primary drawer-button lg:hidden",children:"Open drawer"}),e.jsx("div",{className:"ml-4",children:e.jsx(A,{})})]}),e.jsxs("div",{className:"drawer-side",children:[e.jsx("label",{htmlFor:"my-drawer-2","aria-label":"close sidebar",className:"drawer-overlay"}),e.jsxs("ul",{className:"menu bg-base-200 text-base-content min-h-full w-80 p-4",children:[e.jsx("li",{children:e.jsx(J,{to:"/m/posts",children:"Manage Posts"})}),e.jsx("li",{children:e.jsx(J,{to:"/m/components",children:"Manage Page Components"})}),e.jsx("li",{children:e.jsx(J,{to:"/m/setting",children:"Setting"})}),e.jsx("li",{children:e.jsx("a",{href:"/",children:"Show Blog"})})]})]})]})})]})})}function Z(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"p-4",children:e.jsx("h1",{className:"text-5xl",children:"Manage - Login"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(A,{})})]})})}function ee(){const[a,d]=t.useState(""),[c,i]=t.useState(""),p=async(m,g)=>{await fetch("/login",{method:"POST",body:JSON.stringify({username:m,password:g}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(j=>j.json()).then(j=>{j.result=="success"?window.location.replace("/m"):alert("Login failed.")}).catch(j=>{console.log(j.message)})},x=m=>{m.preventDefault(),p(a,c)};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:x,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",id:"username",placeholder:"Username",autoComplete:"username",className:"input input-bordered",value:a,onChange:m=>d(m.target.value)})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"password",id:"password",autoComplete:"password",className:"input input-bordered",placeholder:"Password",value:c,onChange:m=>i(m.target.value)})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Login"})})]})})})}M(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(R,{children:e.jsxs(V,{children:[e.jsxs(v,{path:"m",element:e.jsx(Q,{}),children:[e.jsx(v,{path:"posts",element:e.jsx(G,{})}),e.jsx(v,{path:"posts/edit",element:e.jsx(Y,{})}),e.jsx(v,{path:"posts/new",element:e.jsx(W,{})}),e.jsx(v,{path:"setting",element:e.jsx(H,{})}),e.jsx(v,{path:"components",element:e.jsx($,{})}),e.jsx(v,{path:"components/edit",element:e.jsx(q,{})})]}),e.jsx(v,{path:"login",element:e.jsx(Z,{}),children:e.jsx(v,{path:"login",element:e.jsx(ee,{})})})]})})}));
